---
title: "lab1 KomlevaJ"
output:
  pdf_document: 
    latex_engine: xelatex
  html_document:
    df_print: paged
---
# Лабораторная работа 1

Проверка следующих навыков: Манипулирование объектами данных; использование встроенных функций; 
построение простейших графиков; простейшие статистические концепции.
## Требования к оформлению
* Оформить решение в R Markdown. 
* Сохранить файл в свой репозиторий.
* Выгрузить R Markdown в HTML, назвать своим именем и отправить по почте (если хочется сдать раньше или нужна помощь).

## Исходные данные
Экспоненциальное распределение определяется следующей функцией распределения:
```
F(x) = 1 - e^(-λ⋅x)

```
Функция ``rexp`` генерирует случайные переменные при помощи экспоненциального распределения
``rexp(n=42, rate=5)`` вернёт 42 экспоненциально-распределённых числа с параметром (λ) равным 5. 
Ели второй аргумент не указан, будет использовано значение 1 т.е. получим "стандартное экспоненциальное распределение".

## Задание 1
1. Сгенерируйте 200 случайных значений из стандартного экспоненциального распределения и сохраните в вектор
_exp.1_. Найдите среднее и стандартное отклонение из данных этого вектора.
```{r}
exp.1 <- rexp(200)
exp.1.mean < -mean(exp.1)
exp.1.sd <- sd(exp.1)

```
2. Повторите, использовав следующие значения параметра λ: 0.1, 0.5, 5, 10, и сохраните результаты в векторы: 
_exp.0.1_, _exp.0.5_, _exp.5_, _exp.10_.
```{r}
exp.0.1<-rexp(200, 0.1)
exp.0.1.mean <- mean(exp.0.1)
exp.0.1.sd <- sd(exp.0.1)

exp.0.5<-rexp(200, 0.5)
exp.5<-rexp(200, 5)
exp.10<-rexp(200, 10)
```
3. Функция ``plot()`` общая функция для визуализации данных. Функция ``hist()`` принимает данные и раскладывает 
их по корзинам. Чтобы использовать эти функции нужно для начала передать им данные, которые хотим визуализировать.
  1. Используйте функцию ``hist()`` для построения гистограммы полученного ранее стандартного распределения.
```{r , fig.width=3, fig.height=3}
hist(exp.1)
```
  2. Используйте функцию ``plot()`` с тем же самым вектором для построения графика значений в порядке следования.
```{r , fig.width=3, fig.height=3}
plot(exp.1)
```
  3. Используйте функцию ``plot()`` с любыми двумя полученными ранее векторами, чтобы получить диаграмму рассеяния ([scatterplot](https://www.mathsisfun.com/data/scatter-xy-plots.html)) 
  этих векторов относительно друг друга.
```{r , fig.width=3, fig.height=3}
  plot(exp.0.1,exp.5,main="Диаграмма рассеяния exp.0.1 и exp.5")
```
4. Теперь сравним свойства всех наших векторов. Для начала создадим вектор,
содержащий средние значения каждого из 5 полученных ранее распределений в порядке их создания.
Полученный вектор сохраним в переменную _exp.means_. 
```{r , fig.width=3, fig.height=3}
exp.means <- c(mean.1,mean.0.1,mean.0.5,mean.5,mean.10)

```
Далее необходимо создать следующие диаграммы рассеяния:
  1. Вектор с пятью средними относительно каждого из пяти векторов с различными значениями λ.
```{r , fig.width=3, fig.height=3}
  exp.means.extend <- rep(exp.means,each=40);
pairs(~exp.means.extend+exp.1+exp.0.1+exp.0.5+exp.5+exp.10,main="Матрица рассеяния exp.sd относительно исходных векторов",horInd=1)
```
  2. Вектор с пятью стандартными отклонениями относительно каждого из пяти векторов с различными значениями λ.
  ```{r , fig.width=3, fig.height=3}
  exp.sd <- c(sd.1,sd.0.1,sd.0.5,sd.5,sd.10)
  exp.sd.extend <- rep(exp.means,each=40);
pairs(~exp.sd.extend+exp.1+exp.0.1+exp.0.5+exp.5+exp.10,main="Матрица рассеяния exp.sd относительно исходных векторов",horInd=1)
  ```
  3. Вектор с пятью средними относительно вектора с пятью стандартными отклонениями.
 ```{r , fig.width=3, fig.height=3}
 plot(exp.means,exp.sd,main="Диаграмма рассеяния exp.means относительно exp.sd")
lines(exp.means,exp.sd)
   ```
Для каждого графика, поясните увиденное.
## Задание 2
R достаточно производителен, чтобы вычислять относительно большие объёмы данных.
* Для демонстрации сгенерируйте 1100000 (1 млн. 100 тысяч) чисел из стандартного экспоненциального распределения
и сохраните их в вектор _huge.exp.1_. Получите среднее и стандартное отклонение.
 ```{r}
huge.exp.1 <- rexp(1100000)
mean.huge.1 <- mean(huge.exp.1)
sd.huge.1 <- sd(huge.exp.1)
   ```
* Получите гистограмму _huge.exp.1_. Она соответствует функции ``1 - e:^(-x)``? Должна ли?
 ```{r , fig.width=3, fig.height=3}
 hist(huge.exp.1, prob = TRUE, main = "Гистограмма стандартного экспоненциального распределения", ylab="Плотность распределения")
curve(dexp(x), from = 0, to = 8, add = TRUE, col = "pink")
   ```
* Получите среднее всех чисел из _huge.exp.1_ строго больших 1. Для проверки выборки может потребоваться новый вектор.
 ```{r , fig.width=3, fig.height=3}
 mean.great.1 <- mean(huge.exp.1>1)

#check
check.great.1 <- huge.exp.1>1
mean.check <- mean(check.great.1)
mean.great.1==mean.check

   ```
* Получите матрицу _huge.exp.1.mat_, содержащую 1100 строк и 1000 колонок. Постройте гистограмму, использовав полученную матрицу.
Что можно сказать о полученных данных?
 ```{r , fig.width=3, fig.height=3}
 huge.exp.1.mat<-matrix(huge.exp.1,nrow=1100,ncol=1000)
hist(huge.exp.1.mat, prob = TRUE, main = "Гистограмма стандартного экспоненциального распределения", ylab="Плотность распределения")
curve(dexp(x), from = 0, to = 8, add = TRUE, col = "blue")
   ```
* Рассчитайте среднее 137-й колонки из _huge.exp.1.mat_.
 ```{r , fig.width=3, fig.height=3}
 mean.huge.mat.1.137 <- colMeans(huge.exp.1.mat)[137]
   ```
* Найдите среднее всей 1000 колонок и сохраните их в вектор. Отобразите диаграмму средних зннчений колонок.
Объясните почему форма диаграммы отличается от виденных ранее.
 ```{r , fig.width=3, fig.height=3}
 colMeans.huge.mat.1 <- colMeans(huge.exp.1.mat)


barplot(colMeans.huge.mat.1)


hist(colMeans.huge.mat.1, prob = TRUE, main = "Гистограмма средних значений колонок", ylab="Плотность распределения")


mean.norm <- mean(colMeans.huge.mat.1)
sd.norm <- sd(colMeans.huge.mat.1)
curve(dnorm(x,mean=mean.norm,sd=sd.norm), from = 0.8, to = 1.20, col = "blue",add=TRUE)
   ```
* Рассчитайте квадрат каждого значения из _huge.exp.1_ и найдите среднее и стандартное отклонение полученного вектора квадратов.
Объясните отличие от соответствующих показателей вектора _huge.exp.1_. Вам может помочь формула, по которой R рассчитывает
стандартное отклонение: ``sqrt(sum((x - mean(x))^2) / (n - 1))``.
 ```{r , fig.width=3, fig.height=3}
huge.exp.1.square <- huge.exp.1^2
mean.huge.square.1 <- mean(huge.exp.1.square)

#Сравнение результатов с huge.exp.1
sd.huge.square.1 <- sd(huge.exp.1.square)
mean.ratio <- mean.huge.square.1/mean.huge.1
sd.ratio <- sd.huge.square.1/sd.huge.1
   ```
 